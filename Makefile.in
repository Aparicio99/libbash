#############################################
#Copyright 2010 Nathan Eloe
#
#This file is part of libbash.
#
#libbash is free software: you can redistribute it and/or modify
#it under the terms of the GNU General Public License as published by
#the Free Software Foundation, either version 2 of the License, or
#(at your option) any later version.
#
#libbash is distributed in the hope that it will be useful,but WITHOUT ANY WARRANTY; without even the implied warranty of
#MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#GNU General Public License for more details.
#
#You should have received a copy of the GNU General Public License
#along with libbash.  If not, see <http://www.gnu.org/licenses/>.
###############################################
# Makefile.in for libbash
# Author: Nathan Eloe
#

GRAMMAR_SRC=bashast.g
GRAMMAR_INCLUDES=bashastLexer.h bashastParser.h

grammar.run: bashast.g
	@JAVA@ -classpath @antlr_cp@ -Xmx512m org.antlr.Tool -Xconversiontimeout 20000 $<
	touch $@

$(GRAMMAR_INCLUDES): grammar.run

#Do not rename these, the grammar name and file name must match
bashast.g: bashast/bashast.g
	sed -e 's/CommonTree/pANTLR3_BASE_TREE/g' -e 's/Java/C/g' $< > $@

clean:
	rm *.h *.c *.g *.run 2> /dev/null
